---
name: code-review
description: å…¨é¢å¯©æŸ¥ç¨‹å¼ç¢¼å“è³ªã€‚ä½¿ç”¨æ­¤æŠ€èƒ½ç•¶è¢«è¦æ±‚å¯©æŸ¥ç¨‹å¼ç¢¼ã€æª¢æŸ¥é é¢ã€reviewã€å“è³ªæª¢æŸ¥æ™‚ã€‚
---

# Code Review Skill

æ­¤æŠ€èƒ½ç”¨æ–¼å…¨é¢å¯©æŸ¥æŒ‡å®šé é¢æˆ–æ¨¡çµ„çš„ç¨‹å¼ç¢¼å“è³ªï¼Œæ•´åˆæ‰€æœ‰ skill çš„æª¢æŸ¥æ¨™æº–ã€‚

## åŸ·è¡Œæµç¨‹

1. **æ”¶é›†ç¯„åœ** - ç¢ºèªè¦æª¢æŸ¥çš„é é¢/æ¨¡çµ„è·¯å¾‘
2. **æƒææª”æ¡ˆ** - åˆ—å‡ºè©²è·¯å¾‘ä¸‹æ‰€æœ‰ `.vue`ã€`.ts` æª”æ¡ˆ
3. **é€é …æª¢æŸ¥** - ä¾æ“šå„ skill æ¨™æº–å¯©æŸ¥
4. **è¼¸å‡ºå ±å‘Š** - åˆ—å‡ºå•é¡Œèˆ‡æ”¹é€²å»ºè­°

## æª¢æŸ¥ç¯„åœ

ç•¶ç”¨æˆ¶æŒ‡å®šé é¢æˆ–æ¨¡çµ„æ™‚ï¼Œéœ€æª¢æŸ¥ï¼š

```
packages/{package}/app/
â”œâ”€â”€ pages/{æŒ‡å®šé é¢}.vue        # é é¢æœ¬èº«
â”œâ”€â”€ components/{ç›¸é—œå…ƒä»¶}/      # é é¢ä½¿ç”¨çš„å…ƒä»¶
â”œâ”€â”€ composables/{ç›¸é—œé‚è¼¯}.ts   # é é¢ä½¿ç”¨çš„ composable
â”œâ”€â”€ services/{ç›¸é—œæœå‹™}.ts      # é é¢ä½¿ç”¨çš„ service
â””â”€â”€ types/{ç›¸é—œå‹åˆ¥}.ts         # é é¢ä½¿ç”¨çš„å‹åˆ¥å®šç¾©
```

## æª¢æŸ¥æ¸…å–®

### 1. UI è¦ç¯„æª¢æŸ¥ (ui-development)

| é …ç›® | æª¢æŸ¥å…§å®¹ |
|------|----------|
| Vuetify å…ƒä»¶ | æ˜¯å¦ä½¿ç”¨ Vuetify å…ƒä»¶å–ä»£åŸç”Ÿ HTML |
| Script Setup | æ˜¯å¦ä½¿ç”¨ `<script setup lang="ts">` |
| Props å®šç¾© | æ˜¯å¦ä½¿ç”¨ TypeScript æ³›å‹å®šç¾© props |
| éŸ¿æ‡‰å¼ç‹€æ…‹ | æ˜¯å¦å„ªå…ˆä½¿ç”¨ `ref` |
| API å‘¼å« | æ˜¯å¦ä½¿ç”¨ `useFetch` æˆ– `useCustomFetch` |
| æ¨£å¼ | æ˜¯å¦ä½¿ç”¨ Vuetify utility classes è€Œé scoped style |

#### ç¦æ­¢ä½¿ç”¨çš„åŸç”Ÿ HTML

```vue
<!-- âŒ ç¦æ­¢ -->
<button>ã€<input>ã€<select>ã€<table>ã€<div>(ä½œç‚ºå®¹å™¨)

<!-- âœ… æ”¹ç”¨ -->
<v-btn>ã€<v-text-field>ã€<v-select>ã€<v-data-table>ã€<v-sheet>/<v-card>
```

### 2. TypeScript è¦ç¯„æª¢æŸ¥ (lint-check)

| é …ç›® | æª¢æŸ¥å…§å®¹ |
|------|----------|
| å‹åˆ¥å®šç¾© | ç¦æ­¢ä½¿ç”¨ `any` |
| æœªä½¿ç”¨è®Šæ•¸ | ä¸æ‡‰æœ‰æœªä½¿ç”¨çš„è®Šæ•¸æˆ– import |
| Console | ä¸æ‡‰æœ‰ `console.log` (é™¤éŒ¯èª¤è™•ç†å¤–) |
| å…±ç”¨å‹åˆ¥ | æ˜¯å¦å¾ shared package å°å…¥å‹åˆ¥ |

### 3. Service Class è¦ç¯„æª¢æŸ¥

| é …ç›® | æª¢æŸ¥å…§å®¹ |
|------|----------|
| å‘½åè¦ç¯„ | Service class ä»¥ `Service` çµå°¾ |
| å–®ä¸€è·è²¬ | æ¯å€‹ service åªè² è²¬ä¸€å€‹é ˜åŸŸ |
| éŒ¯èª¤è™•ç† | API å‘¼å«æ˜¯å¦æœ‰é©ç•¶çš„éŒ¯èª¤è™•ç† |
| å‹åˆ¥å®‰å…¨ | å›å‚³å€¼æ˜¯å¦æœ‰æ˜ç¢ºå‹åˆ¥å®šç¾© |

### 4. å–®å…ƒæ¸¬è©¦è¦†è“‹æª¢æŸ¥ (unit-test)

| é …ç›® | æª¢æŸ¥å…§å®¹ |
|------|----------|
| æ¸¬è©¦æª”æ¡ˆå­˜åœ¨ | å…ƒä»¶/composable/service æ˜¯å¦æœ‰å°æ‡‰çš„ `.test.ts` |
| æ¸¬è©¦è·¯å¾‘ | æ¸¬è©¦æª”æ¡ˆæ˜¯å¦åœ¨ `tests/` ç›®éŒ„ä¸‹ |
| æ¸¬è©¦å‘½å | æ¸¬è©¦æª”æ¡ˆå‘½åæ˜¯å¦ç¬¦åˆ `{Name}.test.ts` |
| æ¸¬è©¦è¦†è“‹ç‡ | åŸ·è¡Œ `pnpm test --coverage` æª¢æŸ¥è¦†è“‹ç‡ |
| è¦†è“‹ç‡æ¨™æº– | è¡Œè¦†è“‹ç‡ â‰¥ 80%ã€åˆ†æ”¯è¦†è“‹ç‡ â‰¥ 70% |

#### å–®å…ƒæ¸¬è©¦æª”æ¡ˆå°æ‡‰è¦å‰‡

```
ç›®æ¨™æª”æ¡ˆ                                    æ¸¬è©¦æª”æ¡ˆ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
app/pages/{page}.vue                  â†’  tests/pages/{page}.test.ts
app/components/{Component}.vue        â†’  tests/components/{Component}.test.ts
app/composables/{useName}.ts          â†’  tests/composables/{useName}.test.ts
app/services/{ServiceName}.ts         â†’  tests/services/{ServiceName}.test.ts
```

### 5. E2E æ¸¬è©¦è¦†è“‹æª¢æŸ¥ (e2e-test)

| é …ç›® | æª¢æŸ¥å…§å®¹ |
|------|----------|
| E2E æ¸¬è©¦å­˜åœ¨ | é é¢æ˜¯å¦æœ‰å°æ‡‰çš„ `.spec.ts` æ¸¬è©¦ |
| æ¸¬è©¦è·¯å¾‘ | æ¸¬è©¦æª”æ¡ˆæ˜¯å¦åœ¨ `SyncoBox.Testing.E2E.Playwright/tests/` ä¸‹ |
| æ¸¬è©¦å‘½å | æ¸¬è©¦æª”æ¡ˆå‘½åæ˜¯å¦ç¬¦åˆ `{ç·¨è™Ÿ}-{åŠŸèƒ½åç¨±}.spec.ts` |
| é—œéµæµç¨‹è¦†è“‹ | æ˜¯å¦æ¶µè“‹é é¢ä¸»è¦ä½¿ç”¨è€…æµç¨‹ |
| æ¸¬è©¦çµæ§‹ | æ˜¯å¦ä½¿ç”¨ `test.step` çµæ§‹åŒ–æ­¥é©Ÿ |

#### E2E æ¸¬è©¦æª”æ¡ˆå°æ‡‰è¦å‰‡

```
é é¢åŠŸèƒ½                                    E2E æ¸¬è©¦æª”æ¡ˆ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
bim/modelViews.vue                    â†’  tests/bim/01-model-views.spec.ts
task/task-list.vue                    â†’  tests/task/01-task-list.spec.ts
```

#### E2E æ¸¬è©¦è¦†è“‹é …ç›®

- [ ] é é¢è¼‰å…¥èˆ‡åˆå§‹åŒ–
- [ ] ä¸»è¦ CRUD æ“ä½œæµç¨‹
- [ ] è¡¨å–®é©—è­‰èˆ‡æäº¤
- [ ] éŒ¯èª¤ç‹€æ…‹è™•ç†
- [ ] æ¬Šé™æ§åˆ¶ (å¦‚é©ç”¨)

## åŸ·è¡ŒæŒ‡ä»¤

```bash
# 1. Lint æª¢æŸ¥
pnpm --filter @syncobox/{package-name} lint

# 2. åŸ·è¡Œå–®å…ƒæ¸¬è©¦
pnpm test -- packages/{package-name}/tests/

# 3. åŸ·è¡Œå–®å…ƒæ¸¬è©¦ä¸¦ç”¢ç”Ÿè¦†è“‹ç‡å ±å‘Š
pnpm test --coverage -- packages/{package-name}/tests/

# 4. å‹åˆ¥æª¢æŸ¥
pnpm --filter @syncobox/{package-name} typecheck

# 5. åŸ·è¡Œ E2E æ¸¬è©¦ (æœ¬åœ°)
pnpm e2e:local

# 6. åŸ·è¡Œç‰¹å®š E2E æ¸¬è©¦
pnpm e2e test:onpremise -- --grep "{åŠŸèƒ½åç¨±}"
```

## å ±å‘Šæ ¼å¼

å¯©æŸ¥å®Œæˆå¾Œï¼Œè¼¸å‡ºä»¥ä¸‹æ ¼å¼çš„å ±å‘Šï¼š

```markdown
## ğŸ“‹ ç¨‹å¼ç¢¼å¯©æŸ¥å ±å‘Š

**å¯©æŸ¥ç¯„åœ**: `packages/syncobox-ui/app/pages/example.vue`

### âœ… é€šéé …ç›®
- [x] ä½¿ç”¨ `<script setup lang="ts">`
- [x] Props ä½¿ç”¨ TypeScript æ³›å‹
- [x] ç„¡ `any` å‹åˆ¥

### âš ï¸ éœ€æ”¹é€²é …ç›®
- [ ] ç¬¬ 25 è¡Œï¼šä½¿ç”¨åŸç”Ÿ `<button>`ï¼Œæ‡‰æ”¹ç”¨ `<v-btn>`
- [ ] ç¬¬ 42 è¡Œï¼šç™¼ç¾ `console.log`ï¼Œè«‹ç§»é™¤
- [ ] ç¼ºå°‘å–®å…ƒæ¸¬è©¦æª”æ¡ˆ

### ğŸ§ª æ¸¬è©¦è¦†è“‹ç‡

#### å–®å…ƒæ¸¬è©¦
| æª”æ¡ˆ | æ¸¬è©¦æª”æ¡ˆ | ç‹€æ…‹ |
|------|----------|------|
| `pages/example.vue` | `tests/pages/example.test.ts` | âŒ ç¼ºå°‘ |
| `composables/useExample.ts` | `tests/composables/useExample.test.ts` | âœ… å­˜åœ¨ |
| `services/ExampleService.ts` | `tests/services/ExampleService.test.ts` | âš ï¸ è¦†è“‹ç‡ 65% |

**è¦†è“‹ç‡çµ±è¨ˆ** (ç›®æ¨™: è¡Œ â‰¥80%, åˆ†æ”¯ â‰¥70%)
| æŒ‡æ¨™ | è¦†è“‹ç‡ | ç‹€æ…‹ |
|------|--------|------|
| è¡Œè¦†è“‹ç‡ | 72% | âš ï¸ æœªé”æ¨™ |
| åˆ†æ”¯è¦†è“‹ç‡ | 68% | âš ï¸ æœªé”æ¨™ |
| å‡½æ•¸è¦†è“‹ç‡ | 85% | âœ… é”æ¨™ |

#### E2E æ¸¬è©¦
| é é¢åŠŸèƒ½ | E2E æ¸¬è©¦æª”æ¡ˆ | ç‹€æ…‹ |
|----------|--------------|------|
| æ¨¡å‹æª¢è¦–é é¢ | `tests/bim/01-model-views.spec.ts` | âŒ ç¼ºå°‘ |

**E2E æµç¨‹è¦†è“‹**
- [ ] é é¢è¼‰å…¥èˆ‡åˆå§‹åŒ–
- [ ] è³‡æ–™å¤¾å°èˆªåŠŸèƒ½
- [ ] æ¨¡å‹æª¢è¦–åŠŸèƒ½
- [ ] æœå°‹åŠŸèƒ½

### ğŸ”§ å»ºè­°ä¿®æ­£
1. å°‡ `<button @click="submit">` æ”¹ç‚º `<v-btn @click="submit">`
2. ç§»é™¤ç¬¬ 42 è¡Œçš„ `console.log(data)`
3. å»ºç«‹ `tests/pages/example.test.ts` å–®å…ƒæ¸¬è©¦
4. å»ºç«‹ `tests/bim/01-model-views.spec.ts` E2E æ¸¬è©¦
5. æå‡å–®å…ƒæ¸¬è©¦è¦†è“‹ç‡è‡³ 80% ä»¥ä¸Š
```

## ä½¿ç”¨ç¯„ä¾‹

ç”¨æˆ¶å¯ä»¥é€™æ¨£è«‹æ±‚ï¼š

```
è«‹å¯©æŸ¥ syncobox-bimContent çš„ ProjectList é é¢
```

```
å¹«æˆ‘ review packages/syncobox-task/app/pages/task-list.vue é€™å€‹é é¢çš„ç¨‹å¼ç¢¼å“è³ª
```

```
æª¢æŸ¥ syncobox-ui ä¸‹æ‰€æœ‰ components æ˜¯å¦ç¬¦åˆè¦ç¯„
```
